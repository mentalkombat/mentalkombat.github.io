<<<<<<< HEAD
!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="dist/",s(s.s=1)}([function(t){t.exports={translate:[{task:"dog",answer:["собака","собачка"]},{task:"cat",answer:["кот","котик","кошка"]},{task:"man",answer:["человек","мужчина"]},{task:"house",answer:["дом","домик"]},{task:"Rabbit",answer:["кролик"]},{task:"Lion",answer:["лев"]},{task:"Elephant",answer:["слон","слоненок","слоник"]},{task:"Parrot",answer:["попугай","попугайчик"]},{task:"Owl",answer:["сова","филин"]},{task:"dog",answer:["собака","собачка"]},{task:"cat",answer:["кот","котик","кошка"]},{task:"man",answer:["человек","мужчина"]},{task:"house",answer:["дом","домик"]},{task:"Rabbit",answer:["кролик"]},{task:"Lion",answer:["лев"]},{task:"Elephant",answer:["слон","слоненок","слоник"]},{task:"Parrot",answer:["попугай","попугайчик"]},{task:"Owl",answer:["сова","филин"]}],math:[{task:"one plus one equals",answer:["two"]},{task:"five minus three equals",answer:["two"]},{task:"one plus two equals",answer:["three"]},{task:"one plus three equals",answer:["four"]},{task:"one minus one equals",answer:["zero"]},{task:"five plus three equals",answer:["eight"]},{task:"five plus two equals",answer:["seven"]},{task:"five plus five equals",answer:["ten"]}],pictures:[{task:"cat.jpg",answer:["cat","kitten","kitty","kit"]},{task:"dog.jpg",answer:["dog","hound","pooch","bowwow"]},{task:"house.jpg",answer:["house","home"]},{task:"lion.jpg",answer:["lev","lion","lew"]},{task:"rabbit.jpg",answer:["rabbit","lapin","hare","bunny","coney","cony"]}],listening:[{task:"book.ogg",answer:["book"]},{task:"friend.ogg",answer:["friend"]},{task:"game.mp3",answer:["game"]},{task:"hello.mp3",answer:["hello"]},{task:"passanger.mp3",answer:["passanger"]}]}},function(t,e,s){"use strict";s.r(e);var i=class{constructor(t,e,s,i,n,a,r){this.img=t,this.positionOnImg=e,this.sizeOnImg=s,this.speed="number"==typeof n?n:0,this.frames=a,this.once=r,this.sizeOnCanvas=i,this.index=0,this.newSpriteFramesNumber=0,this.isNewSpriteActive=!1,this.oldSpriteOptions=null}update(t){this.index+=this.speed*t}applyingNewSprite(){this.index<this.state+this.newSpriteFramesNumber?this.isNewSpriteActive=!0:!0===this.isNewSpriteActive&&(this.isNewSpriteActive=!1,this.url=this.oldSpriteOptions.url,this.positionOnImg=this.oldSpriteOptions.positionOnImg,this.sizeOnImg=this.oldSpriteOptions.sizeOnImg,this.frames=this.oldSpriteOptions.frames)}render(t){let e;if(this.applyingNewSprite(),this.speed>0){let t=this.frames.length,s=Math.floor(this.index);if(e=this.frames[s%t],this.once&&s>=t)return void(this.done=!0)}else e=0;let s=this.positionOnImg[0],i=this.positionOnImg[1];s+=e*this.sizeOnImg[0],t.drawImage(this.img,s,i,this.sizeOnImg[0],this.sizeOnImg[1],0,0,this.sizeOnCanvas[0],this.sizeOnCanvas[1])}};var n=class{constructor(){this.resourceCache={},this.readyCallbacks=[],this.images={}}load(t){let e=s(55);t.forEach(t=>this.images[t]=e("./"+t));for(let t in this.images)this._load(t)}_load(t){if(this.resourceCache[t])return this.resourceCache[t];var e=new Image;e.addEventListener("load",()=>{this.resourceCache[t]=e,this.isReady()&&this.readyCallbacks.forEach(function(t){t()})}),this.resourceCache[t]=!1,e.src=this.images[t]}get(t){return this.resourceCache[t]}isReady(){var t=!0;for(var e in this.resourceCache)this.resourceCache.hasOwnProperty(e)&&!this.resourceCache[e]&&(t=!1);return t}onReady(t){this.readyCallbacks.push(t)}};var a=class{constructor(t,e){this.positionOnCanvas=t,this.sprite=e}changesprite(t){this.sprite=t}};var r=class extends a{constructor(t,e,s){super(t,e),this.name=s,this.isHpReducing=!1,this.currentHP=100,this.newHP=100,this.maxHP=100}attack(t){let e={url:this.sprite.url,positionOnImg:this.sprite.positionOnImg,sizeOnImg:this.sprite.sizeOnImg,frames:this.sprite.frames};super.changesprite(t),this.sprite.state=this.sprite.index,this.sprite.newSpriteFramesNumber=t.frames.length,this.sprite.oldSpriteOptions=e}};let o=["Terrible","Vile","Monstrous","Spiteful","Snotty","Demonic","Ghastly","Damnable","Abominable"],p=["Ogr","Goblin","Zombie","Bugbear","Demon","Scarecrow","Lucifer","Undead","Devil","Vampire","Ghoul"],l=["Aaron","Bob","Brody","Charlie","Cole","Dylan","Eric","Grant","Henry","Jack","Morgan","Sherie","York"],h=["head1.png","head2.png","head3.png","head4.png","head5.png"],c=["body1.png","body2.png","body3.png","body4.png","body5.png"],g=["legs1.png","legs2.png","legs3.png","legs4.png","legs5.png"];var d=class{constructor(t,e){this.positionOnCanvas=t,this.name=`${this.getRandomElement(o)} ${this.getRandomElement(p)} ${this.getRandomElement(l)}`,this.entities=[],this.enemyGeneration(e),this.speed=10,this.isHpReducing=!1,this.currentHP=100,this.newHP=100,this.maxHP=100}getRandomElement(t){return t[Math.floor(Math.random()*t.length)]}enemyGeneration(t){let e=this.positionOnCanvas[0],s=this.positionOnCanvas[1];this.bodyParts={legs:{url:this.getRandomElement(g),startPosition:[e+0,s+255],animateOptions:{isVertical:0,distance:2,speed:6}},body:{url:this.getRandomElement(c),startPosition:[e-3,s+220],animateOptions:{isVertical:0,distance:1,speed:3}},head:{url:this.getRandomElement(h),startPosition:[e+20,s+160],animateOptions:{isVertical:1,distance:1,speed:3}}};for(let e in this.bodyParts)this.entities.push(new a([this.bodyParts[e].startPosition[0],this.bodyParts[e].startPosition[1]],new i(t.get(this.bodyParts[e].url),[0,0],[200,200],[100,100])))}idleAnimate(t){let e=0;for(let s in this.bodyParts)this.changeAnimatePosition(t,this.entities[e],this.bodyParts[s]),e++}changeAnimatePosition(t,e,s){let i=s.startPosition,n=s.animateOptions.isVertical,a=s.animateOptions.distance;(e.positionOnCanvas[n]>i[n]+a||e.positionOnCanvas[n]<i[n]-a)&&(s.animateOptions.speed=-s.animateOptions.speed),e.positionOnCanvas[n]+=s.animateOptions.speed*t}};class u extends a{constructor(t,e){super(t,e)}addSpellCastEntity(t,e){this.spellCastEntity=new a([0,0],e),this.direction=t,this.isSpellMoving=!1}isMouseOnSpell(t,e){if(t>this.positionOnCanvas[0]&&t<this.positionOnCanvas[0]+this.sprite.sizeOnCanvas[0]&&e>this.positionOnCanvas[1]&&e<this.positionOnCanvas[1]+this.sprite.sizeOnCanvas[1])return!0}setPositionOnCanvas(t,e,s,i){switch(this.direction){case"left":this.spellCastEntity.positionOnCanvas=[t[0]+e[0],e[1]+e[1]/2-this.spellCastEntity.sprite.sizeOnCanvas[1]/2];break;case"bottom":this.spellCastEntity.positionOnCanvas=[s[0]+i[0]/2-this.spellCastEntity.sprite.sizeOnCanvas[0]/2,s[1]+200];break;case"top":this.spellCastEntity.positionOnCanvas=[s[0]+i[0]/2-this.spellCastEntity.sprite.sizeOnCanvas[0]/2,s[1]-250]}this.isSpellMoving=!0}checkCollisionWithEntity(t,e){switch(this.direction){case"left":this.spellCastEntity.positionOnCanvas[0]+this.spellCastEntity.sprite.sizeOnCanvas[0]/2>t[0]+e[0]/2&&(this.isSpellMoving=!1);break;case"bottom":this.spellCastEntity.positionOnCanvas[1]+this.spellCastEntity.sprite.sizeOnCanvas[1]/2<t[1]+e[1]/2&&(this.isSpellMoving=!1);break;case"top":this.spellCastEntity.positionOnCanvas[1]+this.spellCastEntity.sprite.sizeOnCanvas[1]/2>t[1]+e[1]/2&&(this.isSpellMoving=!1)}}changePositionOnCanvas(){if(this.isSpellMoving)switch(this.direction){case"left":this.spellCastEntity.positionOnCanvas[0]+=10;break;case"bottom":this.spellCastEntity.positionOnCanvas[1]-=10;break;case"top":this.spellCastEntity.positionOnCanvas[1]+=10}}}var m=class{constructor(t,e,s,n,a){this.isWheelStop=!1,this.img=t,this.imgWidth=t.width,this.imgHeight=t.height,this.ctx=e,this.width=s,this.height=n,this.ang=0,this.dt=void 0,this.GameSpellWater=new u([500,420],new i(a.get("water-round-sprite.png"),[0,0],[330,340],[150,155],9,[4,5,6],!1)),this.GameSpellWater.addSpellCastEntity("top",new i(a.get("spell-water.png"),[0,0],[184,184],[184,184],7,[0,1,2,3,4,3,2,3,4,3,2,3,4,5,6,7,8,9,10],!0)),this.spells=[],this.spells.push(this.GameSpellWater),this.GameSpellFire=new u([430,150],new i(a.get("fire-sprite.png"),[0,0],[512,512],[200,200],6,[0,1,2,0,1,2,3,2,4,5,4,5,3,4,5,4,5],!1)),this.GameSpellFire.addSpellCastEntity("bottom",new i(a.get("spell-fire.png"),[0,0],[512,512],[250,250],7,[0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5],!0)),this.spells.push(this.GameSpellFire),this.GameSpellWind=new u([710,250],new i(a.get("wind-round-sprite.png"),[0,0],[131,131],[160,160],9,[0,1,2,3],!1)),this.GameSpellWind.addSpellCastEntity("left",new i(a.get("spell-wind.png"),[0,0],[192,192],[192,192],7,[0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2],!0)),this.spells.push(this.GameSpellWind)}draw(){this.ctx.save(),this.ctx.drawImage(this.img,this.width/2-this.imgWidth/2,this.height/2-this.imgHeight/2,this.imgWidth,this.imgHeight),this.ctx.translate(this.GameSpellWater.positionOnCanvas[0],this.GameSpellWater.positionOnCanvas[1]),this.GameSpellWater.sprite.render(this.ctx),this.ctx.translate(-this.GameSpellWater.positionOnCanvas[0],-this.GameSpellWater.positionOnCanvas[1]),this.ctx.translate(this.GameSpellFire.positionOnCanvas[0],this.GameSpellFire.positionOnCanvas[1]),this.GameSpellFire.sprite.render(this.ctx),this.ctx.translate(-this.GameSpellFire.positionOnCanvas[0],-this.GameSpellFire.positionOnCanvas[1]),this.ctx.translate(this.GameSpellWind.positionOnCanvas[0],this.GameSpellWind.positionOnCanvas[1]),this.GameSpellWind.sprite.render(this.ctx),this.ctx.translate(-this.GameSpellWind.positionOnCanvas[0],-this.GameSpellWind.positionOnCanvas[1]),this.ctx.restore()}update(t){this.draw(),this.GameSpellWater.sprite.update(t/2),this.GameSpellFire.sprite.update(t/2),this.GameSpellWind.sprite.update(t/2)}};var w=class{static drawAttackButton(t,e,s,i,n,a){t.save(),t.lineWidth=2,t.strokeStyle="#000000",t.fillStyle="#abc",t.fillRect(s,i,n,a),t.strokeRect(s,i,n,a),t.font="20px Arial",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#000000",t.fillText(e,s+n/2,i+a/2),t.restore()}static drawEntitiesInfoImage(t,e,s,i,n,a){t.save(),t.beginPath(),t.arc(s,i,Math.sqrt(n*n+a*a)/2,0,2*Math.PI,!0),t.closePath(),t.lineWidth=5,t.strokeStyle="#ddd",t.stroke(),t.clip(),t.translate(s,i),t.drawImage(e,-n/2,-a/2,n,a),t.restore()}static drawHealthBar(t,e,s,i,n,a,r,o,p,l){t.save(),l&&t.translate(t.canvas.width,0),t.scale(o,p),t.fillStyle="red",t.fillRect(e,s,i,a),t.lineWidth=3,t.strokeStyle="#ddd",t.strokeRect(e,s,n,a),t.scale(o,p),t.font="18px Arial",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#000000";let h=1;l&&(h=-1),t.fillText(r,h*(e+n/2),s+a/2),t.restore()}static drawEntityName(t,e,s,i,n){t.save(),t.font="20px Arial",t.textBaseline="top",n&&(t.textAlign="right"),t.fillStyle="yellow",t.fillText(e,s,i),t.restore()}},f=s(0);var y=class{constructor(t,e){this.number=null,this.resources=t,this.dict=f,this.userAnswer=null,this.rightAnswersArray=null,this.question=e,this.answer=document.getElementById("gamer_answer")}createTask(t,e){switch(t){case"listening":let s=document.createElement("audio");s.src=`audio/task/${this.dict[t][e].task}`,this.question.appendChild(s),setTimeout(()=>{s.play()},600);let i=document.createElement("button");i.className="playAudio",this.question.appendChild(i);let n=this.resources.get("speaker.png");document.querySelector("#question .playAudio").appendChild(n);break;case"pictures":let a=this.resources.get(this.dict[t][e].task);this.question.appendChild(a);break;default:this.question.innerHTML=this.dict[t][e].task}this.number=e}checkAnswer(t){if(this.rightAnswersArray=this.dict[t][this.number].answer,this.userAnswer=this.answer.value.toLowerCase(),this.rightAnswersArray.indexOf(this.userAnswer)>-1)return this.answer.value="",!0;this.answer.value="",alert("it's wrong")}};var v=class{start(t){this.createCanvas(t),this.resources=new n,this.resources.load(["player-sprite.png","player-head.png","background.jpg","head1.png","head2.png","head3.png","head4.png","head5.png","body1.png","body2.png","body3.png","body4.png","body5.png","legs1.png","legs2.png","legs3.png","legs4.png","legs5.png","wheel.png","spell-water.png","spell-fire.png","spell-wind.png","water-round-sprite.png","fire-sprite.png","wind-round-sprite.png","cat.jpg","dog.jpg","house.jpg","lion.jpg","rabbit.jpg","speaker.png"]),this.resources.onReady(()=>this.init()),this.checkAnswerBtn=document.getElementById("add_answer"),this.audioWheel=document.getElementById("rotateWheel"),this.TasksGroups=["pictures","translate","math","listening","dragAndDrop"],this.currentTaskGroup="listening",this.taskQuestion=document.getElementById("question"),this.taskWindow=document.getElementById("task")}createCanvas(t){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=1280,this.canvas.height=720,t.appendChild(this.canvas)}init(){this.background=this.resources.get("background.jpg"),this.player=new r([100,200],new i(this.resources.get("player-sprite.png"),[0,0],[634,464],[317,232],5,[0,1,2,1],!1),"Player"),this.enemy=new d([this.canvas.width-300,80],this.resources),this.addAttackButtonLogic(),this.canvas.addEventListener("click",this.spellsOnWheelClickHandler.bind(this)),this.canvas.addEventListener("mousemove",this.spellsOnWheelMousemoveHandler.bind(this)),this.checkAnswerBtn.addEventListener("click",this.checkAnswerHanlder.bind(this)),this.lastTime=Date.now(),this.main()}main(){let t=Date.now(),e=(t-this.lastTime)/1e3;this.update(e),this.render(),this.lastTime=t,requestAnimationFrame(this.main.bind(this))}update(t){this.SpellWindow&&this.SpellWindow.show&&this.SpellWindow.update(t),this.player.sprite.update(t),this.enemy.idleAnimate(t),this.startWheel&&(this.picture.isMouseOnWheel(),this.picture.waitClick()),this.spellCastingLogic(t),this.enemyHpReduction()}render(){this.ctx.drawImage(this.background,0,0,this.canvas.width,this.canvas.height),this.renderEntity(this.player),this.enemy.entities.forEach(t=>{this.renderEntity(t)}),this.isShowingAttackButton&&w.drawAttackButton(this.ctx,"Attack!",140,500,200,50),this.drawEntitiesInfo(),this.showspellCastEntity&&this.renderEntity(this.activeSpellCastEntity.spellCastEntity),this.SpellWindow&&this.SpellWindow.show&&this.SpellWindow.draw()}renderEntity(t){this.ctx.save(),this.ctx.translate(t.positionOnCanvas[0],t.positionOnCanvas[1]),t.sprite.render(this.ctx),this.ctx.restore()}spellCastingLogic(t){this.showspellCastEntity&&(this.activeSpellCastEntity.changePositionOnCanvas(),this.activeSpellCastEntity.spellCastEntity.sprite.update(t),this.activeSpellCastEntity.checkCollisionWithEntity(this.enemy.entities[1].positionOnCanvas,this.enemy.entities[1].sprite.sizeOnCanvas),this.activeSpellCastEntity.spellCastEntity.sprite.done&&(this.showspellCastEntity=!1,this.enemy.isHpReduction=!0))}enemyHpReduction(){this.enemy.isHpReduction&&(this.enemy.currentHP>this.enemy.newHP?this.enemy.currentHP-=.5:(this.enemy.isHpReduction=!1,this.isShowingAttackButton=!0),this.activeSpellCastEntity.spellCastEntity.sprite.done=!1,this.activeSpellCastEntity.spellCastEntity.sprite.index=0)}drawEntitiesInfo(){w.drawEntitiesInfoImage(this.ctx,this.resources.get("player-head.png"),50,50,50,50),w.drawEntitiesInfoImage(this.ctx,this.enemy.entities[2].sprite.img,this.canvas.width-50,50,50,50),w.drawHealthBar(this.ctx,100,25,3*this.player.currentHP,3*this.player.maxHP,20,Math.floor(this.player.currentHP)+" / "+this.player.maxHP,1,1,!1),w.drawHealthBar(this.ctx,100,25,3*this.enemy.currentHP,3*this.enemy.maxHP,20,Math.floor(this.enemy.currentHP)+" / "+this.enemy.maxHP,-1,1,!0),w.drawEntityName(this.ctx,this.player.name,100,50,!1),w.drawEntityName(this.ctx,this.enemy.name,this.canvas.width-100,50,!0)}addAttackButtonLogic(){this.attackButtonParameters={x1:140,y1:500,x2:340,y2:550},this.isShowingAttackButton=!0,this.canvas.addEventListener("click",this.attackButtonClickHanlder.bind(this)),this.canvas.addEventListener("mousemove",this.attackButtonMousemoveHanlder.bind(this))}attackButtonClickHanlder(t){if(!0===this.isShowingAttackButton){let e=t.pageX-t.target.offsetLeft,s=t.pageY-t.target.offsetTop;e>this.attackButtonParameters.x1&&e<this.attackButtonParameters.x2&&s>this.attackButtonParameters.y1&&s<this.attackButtonParameters.y2&&(this.canvas.style.cursor="default",this.isShowingAttackButton=!1,this.SpellWindow||(this.SpellWindow=new m(this.resources.get("wheel.png"),this.ctx,this.canvas.width,this.canvas.height,this.resources),this.taskNumber=0),this.SpellWindow.show=!0)}}attackButtonMousemoveHanlder(t){if(!0===this.isShowingAttackButton){let e=t.pageX-t.target.offsetLeft,s=t.pageY-t.target.offsetTop;e>this.attackButtonParameters.x1&&e<this.attackButtonParameters.x2&&s>this.attackButtonParameters.y1&&s<this.attackButtonParameters.y2&&!0===this.isShowingAttackButton?this.canvas.style.cursor="pointer":this.canvas.style.cursor="default"}}spellsOnWheelClickHandler(t){if(this.SpellWindow&&this.SpellWindow.show){let e=t.pageX-t.target.offsetLeft,s=t.pageY-t.target.offsetTop;for(let t=0;t<this.SpellWindow.spells.length;t++)if(this.SpellWindow.spells[t].isMouseOnSpell(e,s)){this.activeSpellCastEntity=this.SpellWindow.spells[t],this.taskWindow.style.display="block",this.task=new y(this.resources,this.taskQuestion),console.log(this.taskNumber,"this.taskNumber"),this.task.createTask(this.currentTaskGroup,this.taskNumber),this.taskNumber++;break}}}spellsOnWheelMousemoveHandler(){if(this.SpellWindow&&this.SpellWindow.show){let t=event.pageX-event.target.offsetLeft,e=event.pageY-event.target.offsetTop;for(let s=0;s<this.SpellWindow.spells.length;s++){if(this.SpellWindow.spells[s].isMouseOnSpell(t,e)){this.canvas.style.cursor="pointer";break}this.canvas.style.cursor="default"}}}checkAnswerHanlder(){if(this.task.checkAnswer(this.currentTaskGroup)){if(this.taskWindow.style.display="none",this.SpellWindow.show=!1,"listening"===this.currentTaskGroup){let t=document.querySelector("#question audio"),e=document.querySelector("#question .playAudio");this.taskQuestion.removeChild(t),this.taskQuestion.removeChild(e)}if("pictures"===this.currentTaskGroup){let t=document.querySelector("#question img");this.taskQuestion.removeChild(t)}this.player.attack(new i(this.resources.get("player-sprite.png"),[0,464],[634,464],[317,232],5,[0,1,2,3,4,0])),setTimeout(()=>this.createSpell(),700)}}createSpell(){this.enemy.currentHP>0&&(this.enemy.newHP=this.enemy.currentHP-20),this.activeSpellCastEntity.setPositionOnCanvas(this.player.positionOnCanvas,this.player.sprite.sizeOnCanvas,this.enemy.entities[1].positionOnCanvas,this.enemy.entities[1].sprite.sizeOnCanvas),this.showspellCastEntity=!0}};s(60),s(2);(new v).start(document.body)},function(t,e){},function(t,e,s){t.exports=s.p+"img/wind-sprite.png"},function(t,e,s){t.exports=s.p+"img/wind-sprite-all.png"},function(t,e,s){t.exports=s.p+"img/wind-round-sprite.png"},function(t,e,s){t.exports=s.p+"img/wheel.png"},function(t,e,s){t.exports=s.p+"img/wheel.jpg"},function(t,e,s){t.exports=s.p+"img/water1.jpg"},function(t,e,s){t.exports=s.p+"img/water-round-sprite.png"},function(t,e,s){t.exports=s.p+"img/water-one.png"},function(t,e,s){t.exports=s.p+"img/sprite-splash.png"},function(t,e,s){t.exports=s.p+"img/sprite-sheet-water-wave-splashes-260nw-535514053.jpg"},function(t,e,s){t.exports=s.p+"img/sprite-sheet-water-pillar-trap-260nw-1040354470.jpg"},function(t,e,s){t.exports=s.p+"img/sprite-sheet-fire-torch-animation-260nw-1050560345.jpg"},function(t,e,s){t.exports=s.p+"img/spell_wheel.png"},function(t,e,s){t.exports=s.p+"img/spell-wind.png"},function(t,e,s){t.exports=s.p+"img/spell-water.png"},function(t,e,s){t.exports=s.p+"img/spell-fire.png"},function(t,e,s){t.exports=s.p+"img/speaker.png"},function(t,e,s){t.exports=s.p+"img/rabbit.jpg"},function(t,e,s){t.exports=s.p+"img/player-sprite.png"},function(t,e,s){t.exports=s.p+"img/player-idle-sprite.png"},function(t,e,s){t.exports=s.p+"img/player-head.png"},function(t,e,s){t.exports=s.p+"img/player-attack-sprite.png"},function(t,e,s){t.exports=s.p+"img/lion.jpg"},function(t,e,s){t.exports=s.p+"img/legs5.png"},function(t,e,s){t.exports=s.p+"img/legs4.png"},function(t,e,s){t.exports=s.p+"img/legs3.png"},function(t,e,s){t.exports=s.p+"img/legs2.png"},function(t,e,s){t.exports=s.p+"img/legs1.png"},function(t,e,s){t.exports=s.p+"img/images.jpg"},function(t,e,s){t.exports=s.p+"img/imageproxy.jpg"},function(t,e,s){t.exports=s.p+"img/house.jpg"},function(t,e,s){t.exports=s.p+"img/head5.png"},function(t,e,s){t.exports=s.p+"img/head4.png"},function(t,e,s){t.exports=s.p+"img/head3.png"},function(t,e,s){t.exports=s.p+"img/head2.png"},function(t,e,s){t.exports=s.p+"img/head1.png"},function(t,e,s){t.exports=s.p+"img/fire-sprite.png"},function(t,e,s){t.exports=s.p+"img/fire-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H8.jpg"},function(t,e,s){t.exports=s.p+"img/enemy-idle-sprite.png"},function(t,e,s){t.exports=s.p+"img/dog.jpg"},function(t,e,s){t.exports=s.p+"img/d5508e88029e715cad30397e553fa630.jpg"},function(t,e,s){t.exports=s.p+"img/cat.jpg"},function(t,e,s){t.exports=s.p+"img/body5.png"},function(t,e,s){t.exports=s.p+"img/body4.png"},function(t,e,s){t.exports=s.p+"img/body3.png"},function(t,e,s){t.exports=s.p+"img/body2.png"},function(t,e,s){t.exports=s.p+"img/body1.png"},function(t,e,s){t.exports=s.p+"img/background.jpg"},function(t,e,s){t.exports=s.p+"img/Sprites-JenniferBaldwin.gif"},function(t,e,s){t.exports=s.p+"img/Elements-0.png"},function(t,e,s){t.exports=s.p+"img/Dragon_Breath_noBG.png"},function(t,e,s){t.exports=s.p+"img/88b56c648431076fb611f0c0cbbdc1bd.png"},function(t,e,s){var i={"./88b56c648431076fb611f0c0cbbdc1bd.png":54,"./Dragon_Breath_noBG.png":53,"./Elements-0.png":52,"./Sprites-JenniferBaldwin.gif":51,"./background.jpg":50,"./body1.png":49,"./body2.png":48,"./body3.png":47,"./body4.png":46,"./body5.png":45,"./cat.jpg":44,"./d5508e88029e715cad30397e553fa630.jpg":43,"./dog.jpg":42,"./enemy-idle-sprite.png":41,"./fire-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H8.jpg":40,"./fire-sprite.png":39,"./head1.png":38,"./head2.png":37,"./head3.png":36,"./head4.png":35,"./head5.png":34,"./house.jpg":33,"./imageproxy.jpg":32,"./images.jpg":31,"./legs1.png":30,"./legs2.png":29,"./legs3.png":28,"./legs4.png":27,"./legs5.png":26,"./lion.jpg":25,"./player-attack-sprite.png":24,"./player-head.png":23,"./player-idle-sprite.png":22,"./player-sprite.png":21,"./rabbit.jpg":20,"./speaker.png":19,"./spell-fire.png":18,"./spell-water.png":17,"./spell-wind.png":16,"./spell_wheel.png":15,"./sprite-sheet-fire-torch-animation-260nw-1050560345.jpg":14,"./sprite-sheet-water-pillar-trap-260nw-1040354470.jpg":13,"./sprite-sheet-water-wave-splashes-260nw-535514053.jpg":12,"./sprite-splash.png":11,"./water-one.png":10,"./water-round-sprite.png":9,"./water1.jpg":8,"./wheel.jpg":7,"./wheel.png":6,"./wind-round-sprite.png":5,"./wind-sprite-all.png":4,"./wind-sprite.png":3};function n(t){var e=a(t);return s(e)}function a(t){var e=i[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}n.keys=function(){return Object.keys(i)},n.resolve=a,t.exports=n,n.id=55},,,,,function(t,e){}]);
=======
!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="dist/",i(i.s=1)}([function(t){t.exports={d:[{word:"dog",translation:["собака","собачка"]},{word:"cat",translation:["кот","котик","кошка"]},{word:"man",translation:["человек","мужчина"]},{word:"house",translation:["дом","домик"]},{word:"Rabbit",translation:["кролик"]},{word:"Lion",translation:["лев"]},{word:"Elephant",translation:["слон","слоненок","слоник"]},{word:"Parrot",translation:["попугай","попугайчик"]},{word:"Owl",translation:["сова","филин"]},{word:"dog",translation:["собака","собачка"]},{word:"cat",translation:["кот","котик","кошка"]},{word:"man",translation:["человек","мужчина"]},{word:"house",translation:["дом","домик"]},{word:"Rabbit",translation:["кролик"]},{word:"Lion",translation:["лев"]},{word:"Elephant",translation:["слон","слоненок","слоник"]},{word:"Parrot",translation:["попугай","попугайчик"]},{word:"Owl",translation:["сова","филин"]}]}},function(t,e,i){"use strict";i.r(e);var s=class{constructor(t,e,i,s,n,a,r){this.img=t,this.positionOnImg=e,this.sizeOnImg=i,this.speed="number"==typeof n?n:0,this.frames=a,this.once=r,this.sizeOnCanvas=s,this.index=0,this.newSpriteFramesNumber=0,this.isNewSpriteActive=!1,this.oldSpriteOptions=null}update(t){this.index+=this.speed*t}applyingNewSprite(){this.index<this.state+this.newSpriteFramesNumber?this.isNewSpriteActive=!0:!0===this.isNewSpriteActive&&(this.isNewSpriteActive=!1,this.img=this.oldSpriteOptions.img,this.positionOnImg=this.oldSpriteOptions.positionOnImg,this.sizeOnImg=this.oldSpriteOptions.sizeOnImg,this.sizeOnCanvas=this.oldSpriteOptions.sizeOnCanvas,this.speed=this.oldSpriteOptions.speed,this.frames=this.oldSpriteOptions.frames)}render(t){let e;if(this.applyingNewSprite(),this.speed>0){let t=this.frames.length,i=Math.floor(this.index);if(e=this.frames[i%t],this.once&&i>=t)return void(this.done=!0)}else e=0;let i=this.positionOnImg[0],s=this.positionOnImg[1];i+=e*this.sizeOnImg[0],t.drawImage(this.img,i,s,this.sizeOnImg[0],this.sizeOnImg[1],0,0,this.sizeOnCanvas[0],this.sizeOnCanvas[1])}};var n=class{constructor(){this.resourceCache={},this.readyCallbacks=[],this.images={}}load(t){let e=i(54);t.forEach(t=>this.images[t]=e("./"+t));for(let t in this.images)this._load(t)}_load(t){if(this.resourceCache[t])return this.resourceCache[t];var e=new Image;e.addEventListener("load",()=>{this.resourceCache[t]=e,this.isReady()&&this.readyCallbacks.forEach(function(t){t()})}),this.resourceCache[t]=!1,e.src=this.images[t]}get(t){return this.resourceCache[t]}isReady(){var t=!0;for(var e in this.resourceCache)this.resourceCache.hasOwnProperty(e)&&!this.resourceCache[e]&&(t=!1);return t}onReady(t){this.readyCallbacks.push(t)}};var a=class{constructor(t,e){this.positionOnCanvas=t,this.sprite=e}changesprite(t){this.sprite=t}};var r=class extends a{constructor(t,e,i){super(t,e),this.name=i,this.isHpReducing=!1,this.currentHP=100,this.newHP=100,this.maxHP=100}attack(t){let e={img:this.sprite.img,positionOnImg:this.sprite.positionOnImg,sizeOnImg:this.sprite.sizeOnImg,sizeOnCanvas:this.sprite.sizeOnCanvas,speed:this.sprite.speed,frames:this.sprite.frames};super.changesprite(t),this.sprite.state=this.sprite.index,this.sprite.newSpriteFramesNumber=t.frames.length,this.sprite.oldSpriteOptions=e}};let p=["Terrible","Vile","Monstrous","Spiteful","Snotty","Demonic","Ghastly","Damnable","Abominable"],o=["Ogr","Goblin","Zombie","Bugbear","Demon","Scarecrow","Lucifer","Undead","Devil","Vampire","Ghoul"],l=["Aaron","Bob","Brody","Charlie","Cole","Dylan","Eric","Grant","Henry","Jack","Morgan","Sherie","York"],h=["head1.png","head2.png","head3.png","head4.png","head5.png"],c=["body1.png","body2.png","body3.png","body4.png","body5.png"],d=["legs1.png","legs2.png","legs3.png","legs4.png","legs5.png"];var g=class extends a{constructor(t,e){super(t,null),this.name=`${this.getRandomElement(p)} ${this.getRandomElement(o)} ${this.getRandomElement(l)}`,this.entities=[],this.enemyGeneration(e),this.speed=10,this.isHpReducing=!1,this.currentHP=100,this.newHP=100,this.maxHP=100}getRandomElement(t){return t[Math.floor(Math.random()*t.length)]}enemyGeneration(t){let e=this.positionOnCanvas[0],i=this.positionOnCanvas[1];this.bodyParts={legs:{url:this.getRandomElement(d),startPosition:[e+0,i+255],animateOptions:{isVertical:0,distance:2,speed:6}},body:{url:this.getRandomElement(c),startPosition:[e-31,i+220],animateOptions:{isVertical:0,distance:1,speed:3}},head:{url:this.getRandomElement(h),startPosition:[e+20,i+160],animateOptions:{isVertical:1,distance:1,speed:3}}};for(let e in this.bodyParts)this.entities.push(new a([this.bodyParts[e].startPosition[0],this.bodyParts[e].startPosition[1]],new s(t.get(this.bodyParts[e].url),[0,0],[246,200],[123,100])))}idleAnimate(t){let e=0;for(let i in this.bodyParts)this.changeAnimatePosition(t,this.entities[e],this.bodyParts[i]),e++;this.entities[1].sprite.update(t)}changeAnimatePosition(t,e,i){let s=i.startPosition,n=i.animateOptions.isVertical,a=i.animateOptions.distance;(e.positionOnCanvas[n]>s[n]+a||e.positionOnCanvas[n]<s[n]-a)&&(i.animateOptions.speed=-i.animateOptions.speed),e.positionOnCanvas[n]+=i.animateOptions.speed*t}attack(t){let e={img:this.entities[1].sprite.img,positionOnImg:this.entities[1].sprite.positionOnImg,sizeOnImg:this.entities[1].sprite.sizeOnImg,sizeOnCanvas:this.entities[1].sprite.sizeOnCanvas,speed:this.entities[1].sprite.speed,frames:this.entities[1].sprite.frames};this.entities[1].changesprite(t),this.entities[1].sprite.state=this.entities[1].sprite.index,this.entities[1].sprite.newSpriteFramesNumber=t.frames.length,this.entities[1].sprite.oldSpriteOptions=e}};class m extends a{constructor(t,e){super(t,e)}addSpellCastEntity(t,e){this.spellCastEntity=new a([0,0],e),this.direction=t,this.isSpellMoving=!1}isMouseOnSpell(t,e){if(t>this.positionOnCanvas[0]&&t<this.positionOnCanvas[0]+this.sprite.sizeOnCanvas[0]&&e>this.positionOnCanvas[1]&&e<this.positionOnCanvas[1]+this.sprite.sizeOnCanvas[1])return!0}setPositionOnCanvas(t,e,i,s){switch(this.direction){case"left":this.spellCastEntity.positionOnCanvas=[t[0]+e[0],t[1]+e[1]/2-this.spellCastEntity.sprite.sizeOnCanvas[1]/2];break;case"bottom":this.spellCastEntity.positionOnCanvas=[i[0]+s[0]/2-this.spellCastEntity.sprite.sizeOnCanvas[0]/2,i[1]+200];break;case"top":this.spellCastEntity.positionOnCanvas=[i[0]+s[0]/2-this.spellCastEntity.sprite.sizeOnCanvas[0]/2,i[1]-300];break;case"right":this.spellCastEntity.positionOnCanvas=[i[0]-this.spellCastEntity.sprite.sizeOnCanvas[0],i[1]+s[1]/2-this.spellCastEntity.sprite.sizeOnCanvas[1]/2]}this.isSpellMoving=!0}checkCollisionWithEntity(t,e,i,s){switch(this.direction){case"left":this.spellCastEntity.positionOnCanvas[0]+this.spellCastEntity.sprite.sizeOnCanvas[0]/2>i[0]+s[0]/2&&(this.isSpellMoving=!1);break;case"bottom":this.spellCastEntity.positionOnCanvas[1]+this.spellCastEntity.sprite.sizeOnCanvas[1]/2<i[1]+s[1]/2&&(this.isSpellMoving=!1);break;case"top":this.spellCastEntity.positionOnCanvas[1]+this.spellCastEntity.sprite.sizeOnCanvas[1]/2>i[1]+s[1]/2&&(this.isSpellMoving=!1);break;case"right":this.spellCastEntity.positionOnCanvas[0]+this.spellCastEntity.sprite.sizeOnCanvas[0]/2<t[0]+e[0]/2&&(this.isSpellMoving=!1)}}changePositionOnCanvas(){if(this.isSpellMoving)switch(this.direction){case"left":this.spellCastEntity.positionOnCanvas[0]+=10;break;case"bottom":this.spellCastEntity.positionOnCanvas[1]-=10;break;case"top":this.spellCastEntity.positionOnCanvas[1]+=10;break;case"right":this.spellCastEntity.positionOnCanvas[0]-=10}}}var u=class{constructor(t,e,i,n,a,r){this.isWheelStop=!1,this.img=t,this.imgWidth=t.width,this.imgHeight=t.height,this.ctx=e,this.width=i,this.height=n,this.ang=0,this.dt=void 0,this.spells=[],this.GameSpellWater=new m([500,420],new s(r.get("water-round-sprite.png"),[0,0],[330,340],[150,155],9,[4,5,6],!1)),this.GameSpellWater.addSpellCastEntity("top",new s(r.get("spell-water.png"),[0,0],[184,184],[184,184],7,[0,1,2,3,4,3,2,3,4,3,2,3,4,5,6,7,8,9,10],!0)),this.spells.push(this.GameSpellWater),this.GameSpellFire=new m([430,150],new s(r.get("fire-sprite.png"),[0,0],[512,512],[200,200],6,[0,1,2,0,1,2,3,2,4,5,4,5,3,4,5,4,5],!1)),this.GameSpellFire.addSpellCastEntity("bottom",new s(r.get("spell-fire.png"),[0,0],[512,512],[250,250],7,[0,1,2,3,4,5,0,1,2,3,4,5,0,1,2,3,4,5],!0)),this.spells.push(this.GameSpellFire),this.GameSpellWind=new m([710,250],new s(r.get("wind-round-sprite.png"),[0,0],[131,131],[160,160],9,[0,1,2,3],!1)),this.GameSpellWind.addSpellCastEntity("left",new s(r.get("spell-wind.png"),[0,0],[192,192],[192,192],7,[0,1,2,0,1,2,0,1,2,0,1,2,0,1,2,0,1,2],!0)),this.spells.push(this.GameSpellWind)}render(t,e,i,s){this.dt=s,t&&e&&(!0===i?this.stopWheel():this.animateWheel())}draw(t){this.ctx.save(),this.ctx.translate(this.width/2,this.height/2),this.ctx.rotate(Math.PI/180*t),this.ctx.translate(-this.width/2,-this.height/2),this.ctx.drawImage(this.img,this.width/2-this.imgWidth/2,this.height/2-this.imgHeight/2,this.imgWidth,this.imgHeight),this.ctx.translate(this.GameSpellWater.positionOnCanvas[0],this.GameSpellWater.positionOnCanvas[1]),this.GameSpellWater.sprite.render(this.ctx),this.ctx.translate(-this.GameSpellWater.positionOnCanvas[0],-this.GameSpellWater.positionOnCanvas[1]),this.ctx.translate(this.GameSpellFire.positionOnCanvas[0],this.GameSpellFire.positionOnCanvas[1]),this.GameSpellFire.sprite.render(this.ctx),this.ctx.translate(-this.GameSpellFire.positionOnCanvas[0],-this.GameSpellFire.positionOnCanvas[1]),this.ctx.translate(this.GameSpellWind.positionOnCanvas[0],this.GameSpellWind.positionOnCanvas[1]),this.GameSpellWind.sprite.render(this.ctx),this.ctx.translate(-this.GameSpellWind.positionOnCanvas[0],-this.GameSpellWind.positionOnCanvas[1]),this.ctx.restore()}animateWheel(){this.isWheelStop||(this.GameSpellWater.sprite.update(this.dt),this.GameSpellFire.sprite.update(this.dt),this.GameSpellWind.sprite.update(this.dt))}stopWheel(){this.GameSpellWater.sprite.update(this.dt),this.GameSpellFire.sprite.update(this.dt),this.GameSpellWind.sprite.update(this.dt)}};var y=class{static drawAttackButton(t,e,i,s,n,a){t.save(),t.lineWidth=2,t.strokeStyle="#000000",t.fillStyle="#abc",t.fillRect(i,s,n,a),t.strokeRect(i,s,n,a),t.font="20px Arial",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#000000",t.fillText(e,i+n/2,s+a/2),t.restore()}static drawEntitiesInfoImage(t,e,i,s,n,a){t.save(),t.beginPath(),t.arc(i,s,Math.sqrt(n*n+a*a)/2,0,2*Math.PI,!0),t.closePath(),t.lineWidth=5,t.strokeStyle="#ddd",t.stroke(),t.clip(),t.translate(i,s),t.drawImage(e,-n/2,-a/2,n,a),t.restore()}static drawHealthBar(t,e,i,s,n,a,r,p,o,l){t.save(),l&&t.translate(t.canvas.width,0),t.scale(p,o),t.fillStyle="red",t.fillRect(e,i,s,a),t.lineWidth=3,t.strokeStyle="#ddd",t.strokeRect(e,i,n,a),t.scale(p,o),t.font="18px Arial",t.textAlign="center",t.textBaseline="middle",t.fillStyle="#000000";let h=1;l&&(h=-1),t.fillText(r,h*(e+n/2),i+a/2),t.restore()}static drawEntityName(t,e,i,s,n){t.save(),t.font="20px Arial",t.textBaseline="top",n&&(t.textAlign="right"),t.fillStyle="yellow",t.fillText(e,i,s),t.restore()}},w=i(0);var f=class{constructor(t){this.answer=null,this.number=t,this.dict=w,this.userAnswer=null,this.rightAnswersArray=null}createTask(t){document.getElementById("question").innerHTML=this.dict.d[t].word,this.number=t}checkAnswer(){this.rightAnswersArray=this.dict.d[this.number].translation,this.userAnswer=document.getElementById("gamer_answer").value.toLowerCase();for(let t=0;t<=this.rightAnswersArray.length-1;t++)return this.userAnswer==this.rightAnswersArray[t]?(document.getElementById("gamer_answer").value="",console.log("correct"),!0):(console.log("incorrect"),!1)}};var v=class{start(t){this.createCanvas(t),this.resources=new n,this.resources.load(["player-sprite.png","player-head.png","background.jpg","head1.png","head2.png","head3.png","head4.png","head5.png","body1.png","body2.png","body3.png","body4.png","body5.png","legs1.png","legs2.png","legs3.png","legs4.png","legs5.png","wheel.png","spell-water.png","spell-fire.png","spell-wind.png","water-round-sprite.png","fire-sprite.png","wind-round-sprite.png","body1-attack.png","body2-attack.png","body3-attack.png","body4-attack.png","body5-attack.png","enemy-spell-sprite.png"]),this.resources.onReady(()=>this.init()),this.checkAnswerBtn=document.getElementById("add_answer"),this.audioWheel=document.getElementById("rotateWheel")}createCanvas(t){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=1280,this.canvas.height=720,t.appendChild(this.canvas)}init(){this.background=this.resources.get("background.jpg"),this.player=new r([100,200],new s(this.resources.get("player-sprite.png"),[0,0],[634,464],[317,232],5,[0,1,2,1],!1),"Player"),this.enemy=new g([this.canvas.width-300,80],this.resources),this.addAttackButtonLogic(),this.canvas.addEventListener("click",this.spellsOnWheelClickHandler.bind(this)),this.canvas.addEventListener("mousemove",this.spellsOnWheelMousemoveHandler.bind(this)),this.checkAnswerBtn.addEventListener("click",this.checkAnswerHanlder.bind(this)),this.isHpReduction=!1,this.lastTime=Date.now(),this.main()}main(){let t=Date.now(),e=(t-this.lastTime)/1e3;this.update(e),this.render(),this.lastTime=t,requestAnimationFrame(this.main.bind(this))}update(t){this.SpellWindow&&this.SpellWindow.show&&this.SpellWindow.render(this.SpellWindow,this.SpellWindow.show,this.SpellWindow.isWheelStop,t),this.player.sprite.update(t),this.enemy.idleAnimate(t),this.spellCastingLogic(t),this.hpReduction()}render(){this.ctx.drawImage(this.background,0,0,this.canvas.width,this.canvas.height),this.renderEntity(this.player),this.enemy.entities.forEach(t=>{this.renderEntity(t)}),this.isShowingAttackButton&&y.drawAttackButton(this.ctx,"Attack!",140,500,200,50),this.drawEntitiesInfo(),this.showspellCastEntity&&this.renderEntity(this.activeSpellCastEntity.spellCastEntity),this.SpellWindow&&this.SpellWindow.show&&this.SpellWindow.draw(this.SpellWindow.ang)}renderEntity(t){this.ctx.save(),this.ctx.translate(t.positionOnCanvas[0],t.positionOnCanvas[1]),t.sprite.render(this.ctx),this.ctx.restore()}spellCastingLogic(t){this.showspellCastEntity&&(this.activeSpellCastEntity.changePositionOnCanvas(),this.activeSpellCastEntity.spellCastEntity.sprite.update(t),this.activeSpellCastEntity.checkCollisionWithEntity(this.player.positionOnCanvas,this.player.sprite.sizeOnCanvas,this.enemy.entities[1].positionOnCanvas,this.enemy.entities[1].sprite.sizeOnCanvas),this.activeSpellCastEntity.spellCastEntity.sprite.done&&(this.showspellCastEntity=!1,this.isHpReduction=!0))}hpReduction(){this.isHpReduction&&(this.enemy.currentHP>this.enemy.newHP||this.player.currentHP>this.player.newHP?this.isCorrectAnswer?this.enemy.currentHP-=.5:this.player.currentHP-=.5:(this.isHpReduction=!1,this.isShowingAttackButton=!0),this.activeSpellCastEntity.spellCastEntity.sprite.done=!1,this.activeSpellCastEntity.spellCastEntity.sprite.index=0)}drawEntitiesInfo(){y.drawEntitiesInfoImage(this.ctx,this.resources.get("player-head.png"),50,50,50,50),y.drawEntitiesInfoImage(this.ctx,this.enemy.entities[2].sprite.img,this.canvas.width-50,50,50,50),y.drawHealthBar(this.ctx,100,25,3*this.player.currentHP,3*this.player.maxHP,20,Math.floor(this.player.currentHP)+" / "+this.player.maxHP,1,1,!1),y.drawHealthBar(this.ctx,100,25,3*this.enemy.currentHP,3*this.enemy.maxHP,20,Math.floor(this.enemy.currentHP)+" / "+this.enemy.maxHP,-1,1,!0),y.drawEntityName(this.ctx,this.player.name,100,50,!1),y.drawEntityName(this.ctx,this.enemy.name,this.canvas.width-100,50,!0)}addAttackButtonLogic(){this.attackButtonParameters={x1:140,y1:500,x2:340,y2:550},this.isShowingAttackButton=!0,this.canvas.addEventListener("click",this.attackButtonClickHanlder.bind(this)),this.canvas.addEventListener("mousemove",this.attackButtonMousemoveHanlder.bind(this))}attackButtonClickHanlder(t){if(!0===this.isShowingAttackButton){let e=t.pageX-t.target.offsetLeft,i=t.pageY-t.target.offsetTop;e>this.attackButtonParameters.x1&&e<this.attackButtonParameters.x2&&i>this.attackButtonParameters.y1&&i<this.attackButtonParameters.y2&&(this.canvas.style.cursor="default",this.isShowingAttackButton=!1,this.SpellWindow||(this.SpellWindow=new u(this.resources.get("wheel.png"),this.ctx,this.canvas.width,this.canvas.height,this.ang,this.resources),this.taskNumber=0),this.SpellWindow.show=!0)}}attackButtonMousemoveHanlder(t){if(!0===this.isShowingAttackButton){let e=t.pageX-t.target.offsetLeft,i=t.pageY-t.target.offsetTop;e>this.attackButtonParameters.x1&&e<this.attackButtonParameters.x2&&i>this.attackButtonParameters.y1&&i<this.attackButtonParameters.y2&&!0===this.isShowingAttackButton?this.canvas.style.cursor="pointer":this.canvas.style.cursor="default"}}spellsOnWheelClickHandler(t){if(this.SpellWindow&&this.SpellWindow.show){let e=t.pageX-t.target.offsetLeft,i=t.pageY-t.target.offsetTop;for(let t=0;t<this.SpellWindow.spells.length;t++)if(this.SpellWindow.spells[t].isMouseOnSpell(e,i)){this.activeSpellCastEntity=this.SpellWindow.spells[t],document.getElementById("task").style.display="block",this.task=new f,this.task.createTask(this.taskNumber),this.taskNumber++;break}}}spellsOnWheelMousemoveHandler(){if(this.SpellWindow&&this.SpellWindow.show){let t=event.pageX-event.target.offsetLeft,e=event.pageY-event.target.offsetTop;for(let i=0;i<this.SpellWindow.spells.length;i++){if(this.SpellWindow.spells[i].isMouseOnSpell(t,e)){this.canvas.style.cursor="pointer";break}this.canvas.style.cursor="default"}}}checkAnswerHanlder(){if(document.getElementById("task").style.display="none",this.SpellWindow.show=!1,this.isCorrectAnswer=this.task.checkAnswer(),this.isCorrectAnswer)this.player.attack(new s(this.resources.get("player-sprite.png"),[0,464],[634,464],[317,232],5,[0,1,2,3,4,0])),this.enemy.currentHP>0&&(this.enemy.newHP=this.enemy.currentHP-20);else{let t=this.enemy.entities[1].sprite.img.src.split("/").pop().split(".")[0]+"-attack.png";this.enemy.attack(new s(this.resources.get(t),[0,0],[246,170],[123,85],5,[0,1,2,1,0])),this.activeSpellCastEntity=new m,this.activeSpellCastEntity.addSpellCastEntity("right",new s(this.resources.get("enemy-spell-sprite.png"),[0,128],[256,128],[256,128],7,[0,1,2,3,4,3,2,3,4,3,2,3,4,3,2,3,4,5],!0)),this.player.currentHP>0&&(this.player.newHP=this.player.currentHP-20)}setTimeout(()=>{this.activeSpellCastEntity.setPositionOnCanvas(this.player.positionOnCanvas,this.player.sprite.sizeOnCanvas,this.enemy.entities[1].positionOnCanvas,this.enemy.entities[1].sprite.sizeOnCanvas),this.showspellCastEntity=!0},700)}};i(59),i(2);(new v).start(document.body)},function(t,e){},function(t,e,i){t.exports=i.p+"img/wind-sprite.png"},function(t,e,i){t.exports=i.p+"img/wind-sprite-all.png"},function(t,e,i){t.exports=i.p+"img/wind-round-sprite.png"},function(t,e,i){t.exports=i.p+"img/wheel.png"},function(t,e,i){t.exports=i.p+"img/wheel.jpg"},function(t,e,i){t.exports=i.p+"img/water1.jpg"},function(t,e,i){t.exports=i.p+"img/water-round-sprite.png"},function(t,e,i){t.exports=i.p+"img/sprite-splash.png"},function(t,e,i){t.exports=i.p+"img/sprite-sheet-water-wave-splashes-260nw-535514053.jpg"},function(t,e,i){t.exports=i.p+"img/sprite-sheet-water-pillar-trap-260nw-1040354470.jpg"},function(t,e,i){t.exports=i.p+"img/sprite-sheet-fire-torch-animation-260nw-1050560345.jpg"},function(t,e,i){t.exports=i.p+"img/spell_wheel.png"},function(t,e,i){t.exports=i.p+"img/spell-wind.png"},function(t,e,i){t.exports=i.p+"img/spell-water.png"},function(t,e,i){t.exports=i.p+"img/spell-fire.png"},function(t,e,i){t.exports=i.p+"img/player-sprite.png"},function(t,e,i){t.exports=i.p+"img/player-idle-sprite.png"},function(t,e,i){t.exports=i.p+"img/player-head.png"},function(t,e,i){t.exports=i.p+"img/player-attack-sprite.png"},function(t,e,i){t.exports=i.p+"img/legs5.png"},function(t,e,i){t.exports=i.p+"img/legs4.png"},function(t,e,i){t.exports=i.p+"img/legs3.png"},function(t,e,i){t.exports=i.p+"img/legs2.png"},function(t,e,i){t.exports=i.p+"img/legs1.png"},function(t,e,i){t.exports=i.p+"img/images.jpg"},function(t,e,i){t.exports=i.p+"img/imageproxy.jpg"},function(t,e,i){t.exports=i.p+"img/head5.png"},function(t,e,i){t.exports=i.p+"img/head4.png"},function(t,e,i){t.exports=i.p+"img/head3.png"},function(t,e,i){t.exports=i.p+"img/head2.png"},function(t,e,i){t.exports=i.p+"img/head1.png"},function(t,e,i){t.exports=i.p+"img/fire-sprite.png"},function(t,e,i){t.exports=i.p+"img/fire-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H8.jpg"},function(t,e,i){t.exports=i.p+"img/enemy-spell-sprite.png"},function(t,e,i){t.exports=i.p+"img/enemy-idle-sprite.png"},function(t,e,i){t.exports=i.p+"img/d5508e88029e715cad30397e553fa630.jpg"},function(t,e,i){t.exports=i.p+"img/body5.png"},function(t,e,i){t.exports=i.p+"img/body5-attack.png"},function(t,e,i){t.exports=i.p+"img/body4.png"},function(t,e,i){t.exports=i.p+"img/body4-attack.png"},function(t,e,i){t.exports=i.p+"img/body3.png"},function(t,e,i){t.exports=i.p+"img/body3-attack.png"},function(t,e,i){t.exports=i.p+"img/body2.png"},function(t,e,i){t.exports=i.p+"img/body2-attack.png"},function(t,e,i){t.exports=i.p+"img/body1.png"},function(t,e,i){t.exports=i.p+"img/body1-attack.png"},function(t,e,i){t.exports=i.p+"img/background.jpg"},function(t,e,i){t.exports=i.p+"img/Sprites-JenniferBaldwin.gif"},function(t,e,i){t.exports=i.p+"img/Elements-0.png"},function(t,e,i){t.exports=i.p+"img/Dragon_Breath_noBG.png"},function(t,e,i){t.exports=i.p+"img/88b56c648431076fb611f0c0cbbdc1bd.png"},function(t,e,i){var s={"./88b56c648431076fb611f0c0cbbdc1bd.png":53,"./Dragon_Breath_noBG.png":52,"./Elements-0.png":51,"./Sprites-JenniferBaldwin.gif":50,"./background.jpg":49,"./body1-attack.png":48,"./body1.png":47,"./body2-attack.png":46,"./body2.png":45,"./body3-attack.png":44,"./body3.png":43,"./body4-attack.png":42,"./body4.png":41,"./body5-attack.png":40,"./body5.png":39,"./d5508e88029e715cad30397e553fa630.jpg":38,"./enemy-idle-sprite.png":37,"./enemy-spell-sprite.png":36,"./fire-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H8.jpg":35,"./fire-sprite.png":34,"./head1.png":33,"./head2.png":32,"./head3.png":31,"./head4.png":30,"./head5.png":29,"./imageproxy.jpg":28,"./images.jpg":27,"./legs1.png":26,"./legs2.png":25,"./legs3.png":24,"./legs4.png":23,"./legs5.png":22,"./player-attack-sprite.png":21,"./player-head.png":20,"./player-idle-sprite.png":19,"./player-sprite.png":18,"./spell-fire.png":17,"./spell-water.png":16,"./spell-wind.png":15,"./spell_wheel.png":14,"./sprite-sheet-fire-torch-animation-260nw-1050560345.jpg":13,"./sprite-sheet-water-pillar-trap-260nw-1040354470.jpg":12,"./sprite-sheet-water-wave-splashes-260nw-535514053.jpg":11,"./sprite-splash.png":10,"./water-round-sprite.png":9,"./water1.jpg":8,"./wheel.jpg":7,"./wheel.png":6,"./wind-round-sprite.png":5,"./wind-sprite-all.png":4,"./wind-sprite.png":3};function n(t){var e=a(t);return i(e)}function a(t){var e=s[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}n.keys=function(){return Object.keys(s)},n.resolve=a,t.exports=n,n.id=54},,,,,function(t,e){}]);
>>>>>>> 7a2219d4e5d8ff5913efad7407b130db05597510
