!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="dist/",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var s=class{constructor(e,t,i,s,n){this.img=e,this.positionOnImg=t,this.sizeOnImg=i,this.speed="number"==typeof s?s:0,this.frames=n,this.index=0,this.newSpriteFramesNumber=0,this.isNewSpriteActive=!1,this.oldSpriteOptions=null}update(e){this.index+=this.speed*e}applyingNewSprite(){this.index<this.state+this.newSpriteFramesNumber?(console.log("attack"),this.isNewSpriteActive=!0):!0===this.isNewSpriteActive&&(console.log("end attack"),this.isNewSpriteActive=!1,this.url=this.oldSpriteOptions.url,this.positionOnImg=this.oldSpriteOptions.positionOnImg,this.sizeOnImg=this.oldSpriteOptions.sizeOnImg,this.frames=this.oldSpriteOptions.frames)}render(e){let t;if(this.applyingNewSprite(),this.speed>0){let e=this.frames.length,i=Math.floor(this.index);t=this.frames[i%e]}else t=0;let i=this.positionOnImg[0],s=this.positionOnImg[1];i+=t*this.sizeOnImg[0],e.drawImage(this.img,i,s,this.sizeOnImg[0],this.sizeOnImg[1],0,0,this.sizeOnImg[0],this.sizeOnImg[1])}};var n=class{constructor(){this.resourceCache={},this.readyCallbacks=[],this.images={}}load(e){let t=i(40);e.forEach(e=>this.images[e]=t("./"+e));for(let e in this.images)this._load(e)}_load(e){if(this.resourceCache[e])return this.resourceCache[e];var t=new Image;t.addEventListener("load",()=>{this.resourceCache[e]=t,this.isReady()&&this.readyCallbacks.forEach(function(e){e()})}),this.resourceCache[e]=!1,t.src=this.images[e]}get(e){return this.resourceCache[e]}isReady(){var e=!0;for(var t in this.resourceCache)this.resourceCache.hasOwnProperty(t)&&!this.resourceCache[t]&&(e=!1);return e}onReady(e){this.readyCallbacks.push(e)}};var r=class{constructor(e,t){this.positionOnCanvas=e,this.sprite=t}changesprite(e){this.sprite=e}};var a=class extends r{constructor(e,t,i){super(e,t),this.name=i,this.isHpReducing=!1,this.currentHP=100,this.newHP=100,this.maxHP=100}attack(e){let t={url:this.sprite.url,positionOnImg:this.sprite.positionOnImg,sizeOnImg:this.sprite.sizeOnImg,frames:this.sprite.frames};super.changesprite(e),this.sprite.state=this.sprite.index,this.sprite.newSpriteFramesNumber=e.frames.length,this.sprite.oldSpriteOptions=t}};let o=["Terrible","Vile","Monstrous","Spiteful","Snotty","Demonic","Ghastly","Damnable","Abominable"],p=["Ogr","Goblin","Zombie","Bugbear","Demon","Scarecrow","Lucifer","Undead","Devil","Vampire","Ghoul"],h=["Aaron","Bob","Brody","Charlie","Cole","Dylan","Eric","Grant","Henry","Jack","Morgan","Sherie","York"],g=["head1.png","head2.png","head3.png","head4.png","head5.png"],l=["body1.png","body2.png","body3.png","body4.png","body5.png"],c=["legs1.png","legs2.png","legs3.png","legs4.png","legs5.png"];var d=class{constructor(e,t){this.positionOnCanvas=e,this.name=`${this.getRandomElement(o)} ${this.getRandomElement(p)} ${this.getRandomElement(h)}`,this.entities=[],this.booleanValuesForAnimation=[[!0],[!0],[!0]],this.enemyGeneration(t),this.speed=10,this.isHpReducing=!1,this.currentHP=100,this.newHP=100,this.maxHP=100}getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}enemyGeneration(e){let t=this.positionOnCanvas[0],i=this.positionOnCanvas[1];this.bodyParts={legs:{url:this.getRandomElement(c),startPosition:[t+0,i+205],animateOptions:{isVertical:0,distance:2,speed:6}},body:{url:this.getRandomElement(l),startPosition:[t-5,i+120],animateOptions:{isVertical:0,distance:1,speed:3}},head:{url:this.getRandomElement(g),startPosition:[t+45,i+0],animateOptions:{isVertical:1,distance:3,speed:10}}};for(let t in this.bodyParts)this.entities.push(new r([this.bodyParts[t].startPosition[0],this.bodyParts[t].startPosition[1]],new s(e.get(this.bodyParts[t].url),[0,0],[200,200])))}idleAnimate(e){let t=0;for(let i in this.bodyParts)this.changeAnimatePosition(e,this.entities[t],this.bodyParts[i]),t++}changeAnimatePosition(e,t,i){let s=i.startPosition,n=i.animateOptions.isVertical,r=i.animateOptions.distance;(t.positionOnCanvas[n]>s[n]+r||t.positionOnCanvas[n]<s[n]-r)&&(i.animateOptions.speed=-i.animateOptions.speed),t.positionOnCanvas[n]+=i.animateOptions.speed*e}};var m=class{static drawAttackButton(e,t,i,s,n,r){e.save(),e.lineWidth=2,e.strokeStyle="#000000",e.fillStyle="#abc",e.fillRect(i,s,n,r),e.strokeRect(i,s,n,r),e.font="20px Arial",e.textAlign="center",e.textBaseline="middle",e.fillStyle="#000000",e.fillText(t,i+n/2,s+r/2),e.restore()}static drawEntitiesInfoImage(e,t,i,s,n,r){e.save(),e.beginPath(),e.arc(i,s,Math.sqrt(n*n+r*r)/2,0,2*Math.PI,!0),e.closePath(),e.lineWidth=5,e.strokeStyle="#ddd",e.stroke(),e.clip(),e.translate(i,s),e.drawImage(t,-n/2,-r/2,n,r),e.restore()}static drawHealthBar(e,t,i,s,n,r,a,o,p,h){e.save(),h&&e.translate(e.canvas.width,0),e.scale(o,p),e.fillStyle="red",e.fillRect(t,i,s,r),e.lineWidth=3,e.strokeStyle="#ddd",e.strokeRect(t,i,n,r),e.scale(o,p),e.font="18px Arial",e.textAlign="center",e.textBaseline="middle",e.fillStyle="#000000";let g=1;h&&(g=-1),e.fillText(a,g*(t+n/2),i+r/2),e.restore()}static drawEntityName(e,t,i,s,n){e.save(),e.font="20px Arial",e.textBaseline="top",n&&(e.textAlign="right"),e.fillStyle="yellow",e.fillText(t,i,s),e.restore()}};let u={x:void 0,y:void 0};var f=class{start(e){this.createCanvas(e),this.resources=new n,this.resources.load(["player-sprite.png","background.jpg","head1.png","head2.png","head3.png","head4.png","head5.png","body1.png","body2.png","body3.png","body4.png","body5.png","legs1.png","legs2.png","legs3.png","legs4.png","legs5.png","player-head.png"]),this.resources.onReady(()=>this.init())}createCanvas(e){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=1280,this.canvas.height=720,e.appendChild(this.canvas),this.ang=0,this.framesPerSeconds=70,this.imgWheel=new Image,this.imgWheel.src="/src/img/wheel.png",this.ctx.canvas.addEventListener("mousemove",function(e){u.x=e.x,u.y=e.y})}init(){this.background=this.resources.get("background.jpg"),this.player=new a([100,30],new s(this.resources.get("player-sprite.png"),[0,0],[634,464],5,[0,1,2,1]),"Player"),this.enemy=new d([this.canvas.width-400,80],this.resources),this.addAttackButtonLogic(),this.lastTime=Date.now(),this.main()}main(){let e=Date.now(),t=(e-this.lastTime)/1e3;this.update(t),this.render(),this.lastTime=e,requestAnimationFrame(this.main.bind(this))}update(e){this.player.sprite.update(e),this.enemy.idleAnimate(e),this.enemy.isHpReducing&&(this.enemy.currentHP>this.enemy.newHP?this.enemy.currentHP-=.5:this.enemy.isHpReducing=!1)}render(){this.ctx.drawImage(this.background,0,0,this.canvas.width,this.canvas.height),this.renderEntity(this.player),this.enemy.entities.forEach(e=>{this.renderEntity(e)}),m.drawAttackButton(this.ctx,"Attack!",280,500,200,50),this.drawEntitiesInfo()}renderEntity(e){this.ctx.save(),this.ctx.translate(e.positionOnCanvas[0],e.positionOnCanvas[1]),e.sprite.render(this.ctx),this.ctx.restore()}drawEntitiesInfo(){m.drawEntitiesInfoImage(this.ctx,this.resources.get("player-head.png"),50,50,50,50),m.drawEntitiesInfoImage(this.ctx,this.enemy.entities[2].sprite.img,this.canvas.width-50,50,50,50),m.drawHealthBar(this.ctx,100,25,3*this.player.currentHP,3*this.player.maxHP,20,Math.floor(this.player.currentHP)+" / "+this.player.maxHP,1,1,!1),m.drawHealthBar(this.ctx,100,25,3*this.enemy.currentHP,3*this.enemy.maxHP,20,Math.floor(this.enemy.currentHP)+" / "+this.enemy.maxHP,-1,1,!0),m.drawEntityName(this.ctx,this.player.name,100,50,!1),m.drawEntityName(this.ctx,this.enemy.name,this.canvas.width-100,50,!0)}addAttackButtonLogic(){this.canvas.addEventListener("click",e=>{let t=e.pageX-e.target.offsetLeft,i=e.pageY-e.target.offsetTop;t>280&&t<480&&i>500&&i<550&&(this.player.attack(new s(this.resources.get("player-sprite.png"),[0,464],[634,464],5,[0,1,2,3,4,0])),this.enemy.currentHP>0&&(this.enemy.isHpReducing=!0,this.enemy.newHP=this.enemy.currentHP-20))}),this.canvas.addEventListener("mousemove",e=>{let t=e.pageX-e.target.offsetLeft,i=e.pageY-e.target.offsetTop;this.canvas.style.cursor=t>280&&t<480&&i>500&&i<550?"pointer":"default"})}};i(45),i(1);(new f).start(document.body)},function(e,t){},function(e,t,i){e.exports=i.p+"img/wheel2.png"},function(e,t,i){e.exports=i.p+"img/wheel.png"},function(e,t,i){e.exports=i.p+"img/wheel.jpg"},function(e,t,i){e.exports=i.p+"img/water-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H7.jpg"},function(e,t,i){e.exports=i.p+"img/sprite-sheet-water-wave-splashes-260nw-535514053.jpg"},function(e,t,i){e.exports=i.p+"img/sprite-sheet-water-trap-splash-260nw-1061569625.jpg"},function(e,t,i){e.exports=i.p+"img/sprite-sheet-water-pillar-trap-260nw-1040354470.jpg"},function(e,t,i){e.exports=i.p+"img/sprite-sheet-fire-torch-animation-260nw-1050560345.jpg"},function(e,t,i){e.exports=i.p+"img/spell_wheel.png"},function(e,t,i){e.exports=i.p+"img/player-sprite.png"},function(e,t,i){e.exports=i.p+"img/player-idle-sprite.png"},function(e,t,i){e.exports=i.p+"img/player-head.png"},function(e,t,i){e.exports=i.p+"img/player-attack-sprite.png"},function(e,t,i){e.exports=i.p+"img/legs5.png"},function(e,t,i){e.exports=i.p+"img/legs4.png"},function(e,t,i){e.exports=i.p+"img/legs3.png"},function(e,t,i){e.exports=i.p+"img/legs2.png"},function(e,t,i){e.exports=i.p+"img/legs1.png"},function(e,t,i){e.exports=i.p+"img/images.jpg"},function(e,t,i){e.exports=i.p+"img/imageproxy.jpg"},function(e,t,i){e.exports=i.p+"img/head5.png"},function(e,t,i){e.exports=i.p+"img/head4.png"},function(e,t,i){e.exports=i.p+"img/head3.png"},function(e,t,i){e.exports=i.p+"img/head2.png"},function(e,t,i){e.exports=i.p+"img/head1.png"},function(e,t,i){e.exports=i.p+"img/fire-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H8.jpg"},function(e,t,i){e.exports=i.p+"img/enemy-idle-sprite.png"},function(e,t,i){e.exports=i.p+"img/d5508e88029e715cad30397e553fa630.jpg"},function(e,t,i){e.exports=i.p+"img/body5.png"},function(e,t,i){e.exports=i.p+"img/body4.png"},function(e,t,i){e.exports=i.p+"img/body3.png"},function(e,t,i){e.exports=i.p+"img/body2.png"},function(e,t,i){e.exports=i.p+"img/body1.png"},function(e,t,i){e.exports=i.p+"img/background.jpg"},function(e,t,i){e.exports=i.p+"img/Sprites-JenniferBaldwin.gif"},function(e,t,i){e.exports=i.p+"img/Elements-0.png"},function(e,t,i){e.exports=i.p+"img/Dragon_Breath_noBG.png"},function(e,t,i){e.exports=i.p+"img/88b56c648431076fb611f0c0cbbdc1bd.png"},function(e,t,i){var s={"./88b56c648431076fb611f0c0cbbdc1bd.png":39,"./Dragon_Breath_noBG.png":38,"./Elements-0.png":37,"./Sprites-JenniferBaldwin.gif":36,"./background.jpg":35,"./body1.png":34,"./body2.png":33,"./body3.png":32,"./body4.png":31,"./body5.png":30,"./d5508e88029e715cad30397e553fa630.jpg":29,"./enemy-idle-sprite.png":28,"./fire-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H8.jpg":27,"./head1.png":26,"./head2.png":25,"./head3.png":24,"./head4.png":23,"./head5.png":22,"./imageproxy.jpg":21,"./images.jpg":20,"./legs1.png":19,"./legs2.png":18,"./legs3.png":17,"./legs4.png":16,"./legs5.png":15,"./player-attack-sprite.png":14,"./player-head.png":13,"./player-idle-sprite.png":12,"./player-sprite.png":11,"./spell_wheel.png":10,"./sprite-sheet-fire-torch-animation-260nw-1050560345.jpg":9,"./sprite-sheet-water-pillar-trap-260nw-1040354470.jpg":8,"./sprite-sheet-water-trap-splash-260nw-1061569625.jpg":7,"./sprite-sheet-water-wave-splashes-260nw-535514053.jpg":6,"./water-explosion-special-effect-fx-animation-frames-sprite-sheet-vortex-M6E8H7.jpg":5,"./wheel.jpg":4,"./wheel.png":3,"./wheel2.png":2};function n(e){var t=r(e);return i(t)}function r(e){var t=s[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}n.keys=function(){return Object.keys(s)},n.resolve=r,e.exports=n,n.id=40},,,,,function(e,t){}]);