!function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="dist/",e(e.s=4)}([function(t,i,e){t.exports=e.p+"img/player-attack-sprite.png"},function(t,i,e){t.exports=e.p+"img/background.jpg"},function(t,i,e){t.exports=e.p+"img/enemy-idle-sprite.png"},function(t,i,e){t.exports=e.p+"img/player-idle-sprite.png"},function(t,i,e){"use strict";e.r(i);var s=class{constructor(t,i,e,s,n){this.url=t,this.positionOnImg=i,this.sizeOnImg=e,this.img=new Image,this.img.src=t,this.speed=s,this.frames=n,this.index=0,this.newSpriteFramesNumber=0,this.isNewSpriteActive=!1,this.oldSpriteOptions=null}update(t){this.index+=this.speed*t}applyingNewSprite(){this.index<this.state+this.newSpriteFramesNumber?(console.log("attack"),this.isNewSpriteActive=!0):!0===this.isNewSpriteActive&&(console.log("end attack"),this.isNewSpriteActive=!1,this.url=this.oldSpriteOptions.url,this.img=new Image,this.img.src=this.oldSpriteOptions.url,this.positionOnImg=this.oldSpriteOptions.positionOnImg,this.sizeOnImg=this.oldSpriteOptions.sizeOnImg,this.frames=this.oldSpriteOptions.frames)}render(t){let i;if(this.applyingNewSprite(),this.speed>0){let t=this.frames.length,e=Math.floor(this.index);i=this.frames[e%t]}else i=0;let e=this.positionOnImg[0],s=this.positionOnImg[1];e+=i*this.sizeOnImg[0],t.drawImage(this.img,e,s,this.sizeOnImg[0],this.sizeOnImg[1],0,0,this.sizeOnImg[0],this.sizeOnImg[1])}},n=e(0),r=e.n(n);var a=class{constructor(t,i){this.positionOnCanvas=t,this.activeSprite=i}changeActiveSprite(t){this.activeSprite=t}attack(){let t={url:this.activeSprite.url,positionOnImg:this.activeSprite.positionOnImg,sizeOnImg:this.activeSprite.sizeOnImg,frames:this.activeSprite.frames};this.changeActiveSprite(new s(r.a,[0,0],[540,456],5,[0,1,2,3,4,0])),this.activeSprite.state=this.activeSprite.index,this.activeSprite.newSpriteFramesNumber=6,this.activeSprite.oldSpriteOptions=t}},h=e(3),o=e.n(h),p=e(2),c=e.n(p),m=e(1),l=e.n(m);var d=class{createCanvas(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=1280,this.canvas.height=720,t.appendChild(this.canvas)}init(t){this.createCanvas(t),this.background=new Image,this.background.src=l.a,this.player=new a([100,50],new s(o.a,[0,0],[428,380],5,[0,1,2,1])),this.enemy=new a([900,50],new s(c.a,[0,0],[233,373],5,[0,1,3,2,1])),document.querySelector("button").addEventListener("click",()=>{this.player.attack()}),this.lastTime=Date.now(),this.main()}main(){let t=Date.now(),i=(t-this.lastTime)/1e3;this.update(i),this.render(),this.lastTime=t,requestAnimationFrame(this.main.bind(this))}update(t){this.player.activeSprite.update(t),this.enemy.activeSprite.update(t)}render(){this.context.drawImage(this.background,0,0,this.canvas.width,this.canvas.height),this.renderEntity(this.player),this.renderEntity(this.enemy)}renderEntity(t){this.context.save(),this.context.translate(t.positionOnCanvas[0],t.positionOnCanvas[1]),t.activeSprite.render(this.context),this.context.restore()}};e(9);(new d).init(document.body)},,,,,function(t,i){}]);