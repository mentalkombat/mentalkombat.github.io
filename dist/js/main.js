!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="dist/",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var i=class{constructor(e,t,s,i,n){this.url=e,this.positionOnImg=t,this.sizeOnImg=s,this.speed="number"==typeof i?i:0,this.frames=n,this.index=0,this.newSpriteFramesNumber=0,this.isNewSpriteActive=!1,this.oldSpriteOptions=null}update(e){this.index+=this.speed*e}applyingNewSprite(){this.index<this.state+this.newSpriteFramesNumber?(console.log("attack"),this.isNewSpriteActive=!0):!0===this.isNewSpriteActive&&(console.log("end attack"),this.isNewSpriteActive=!1,this.url=this.oldSpriteOptions.url,this.positionOnImg=this.oldSpriteOptions.positionOnImg,this.sizeOnImg=this.oldSpriteOptions.sizeOnImg,this.frames=this.oldSpriteOptions.frames)}render(e){let t;if(this.applyingNewSprite(),this.speed>0){let e=this.frames.length,s=Math.floor(this.index);t=this.frames[s%e]}else t=0;let s=this.positionOnImg[0],i=this.positionOnImg[1];s+=t*this.sizeOnImg[0],e.drawImage(this.url,s,i,this.sizeOnImg[0],this.sizeOnImg[1],0,0,this.sizeOnImg[0],this.sizeOnImg[1])}};var n=class{constructor(){this.resourceCache={},this.readyCallbacks=[],this.images={}}load(e){let t=s(22);e.forEach(e=>this.images[e]=t("./"+e));for(let e in this.images)this._load(e)}_load(e){if(this.resourceCache[e])return this.resourceCache[e];var t=new Image;t.onload=(()=>{this.resourceCache[e]=t,this.isReady()&&this.readyCallbacks.forEach(function(e){e()})}),this.resourceCache[e]=!1,t.src=this.images[e]}get(e){return this.resourceCache[e]}isReady(){var e=!0;for(var t in this.resourceCache)this.resourceCache.hasOwnProperty(t)&&!this.resourceCache[t]&&(e=!1);return e}onReady(e){this.readyCallbacks.push(e)}};var r=class{constructor(e,t){this.positionOnCanvas=e,this.sprite=t}changesprite(e){this.sprite=e}};var o=class extends r{attack(e){let t={url:this.sprite.url,positionOnImg:this.sprite.positionOnImg,sizeOnImg:this.sprite.sizeOnImg,frames:this.sprite.frames};super.changesprite(e),this.sprite.state=this.sprite.index,this.sprite.newSpriteFramesNumber=e.frames.length,this.sprite.oldSpriteOptions=t}};let a=["Terrible","Vile","Monstrous","Spiteful","Snotty","Demonic","Ghastly","Damnable","Abominable"],p=["Ogr","Goblin","Zombie","Bugbear","Demon","Scarecrow","Lucifer","Undead","Devil","Vampire","Ghoul"],h=["Aaron","Bob","Brody","Charlie","Cole","Dylan","Eric","Grant","Henry","Jack","Morgan","Sherie","York"],g=["head1.png","head2.png","head3.png","head4.png","head5.png"],c=["body1.png","body2.png","body3.png","body4.png","body5.png"],l=["legs1.png","legs2.png","legs3.png","legs4.png","legs5.png"];var d=class{constructor(e,t){this.positionOnCanvas=e,this.name=`${this.getRandomElement(a)} ${this.getRandomElement(p)} ${this.getRandomElement(h)}`,this.sprites=[],this.booleanValuesForAnimation=[[!0],[!0],[!0]],this.enemyGeneration(t)}getRandomElement(e){return e[Math.floor(Math.random()*e.length)]}enemyGeneration(e){let t=this.positionOnCanvas[0],s=this.positionOnCanvas[1];this.bodyParts={legs:{url:this.getRandomElement(l),startPosition:[t+0,s+205]},body:{url:this.getRandomElement(c),startPosition:[t-5,s+120]},head:{url:this.getRandomElement(g),startPosition:[t+45,s+0]}};for(let t in this.bodyParts)this.sprites.push(new r([this.bodyParts[t].startPosition[0],this.bodyParts[t].startPosition[1]],new i(e.get(this.bodyParts[t].url),[0,0],[200,200])))}idleAnimate(e){let t=[{isVertical:0,distance:2,speed:6},{isVertical:0,distance:1,speed:3},{isVertical:1,distance:3,speed:10}],s=0;for(let i in this.bodyParts)this.changeAnimatePosition(this.booleanValuesForAnimation[s],this.sprites[s],e,this.bodyParts[i].startPosition,t[s].isVertical,t[s].distance,t[s].speed),s++}changeAnimatePosition(e,t,s,i,n,r,o){!0===e[0]&&t.positionOnCanvas[n]>i[n]+r&&(e[0]=!1),!1===e[0]&&t.positionOnCanvas[n]<i[n]-r&&(e[0]=!0),o=e[0]?o:-o,t.positionOnCanvas[n]+=o*s}};var u=class{start(e){this.createCanvas(e),this.resources=new n,this.resources.load(["player-sprite.png","background.jpg","head1.png","head2.png","head3.png","head4.png","head5.png","body1.png","body2.png","body3.png","body4.png","body5.png","legs1.png","legs2.png","legs3.png","legs4.png","legs5.png"]),this.resources.onReady(()=>this.init())}createCanvas(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=1280,this.canvas.height=720,e.appendChild(this.canvas)}init(){this.background=this.resources.get("background.jpg"),this.player=new o([100,20],new i(this.resources.get("player-sprite.png"),[0,0],[634,464],5,[0,1,2,1])),this.enemy=new d([900,70],this.resources),document.querySelector("button").addEventListener("click",()=>{this.player.attack(new i(this.resources.get("player-sprite.png"),[0,464],[634,464],5,[0,1,2,3,4,0]))}),this.lastTime=Date.now(),this.main()}main(){let e=Date.now(),t=(e-this.lastTime)/1e3;this.update(t),this.render(),this.lastTime=e,requestAnimationFrame(this.main.bind(this))}update(e){this.player.sprite.update(e),this.enemy.idleAnimate(e)}render(){this.context.drawImage(this.background,0,0,this.canvas.width,this.canvas.height),this.renderEntity(this.player),this.enemy.sprites.forEach(e=>{this.renderEntity(e)})}renderEntity(e){this.context.save(),this.context.translate(e.positionOnCanvas[0],e.positionOnCanvas[1]),e.sprite.render(this.context),this.context.restore()}};s(27);(new u).start(document.body)},function(e,t,s){e.exports=s.p+"img/player-sprite.png"},function(e,t,s){e.exports=s.p+"img/player-idle-sprite.png"},function(e,t,s){e.exports=s.p+"img/player-attack-sprite.png"},function(e,t,s){e.exports=s.p+"img/legs5.png"},function(e,t,s){e.exports=s.p+"img/legs4.png"},function(e,t,s){e.exports=s.p+"img/legs3.png"},function(e,t,s){e.exports=s.p+"img/legs2.png"},function(e,t,s){e.exports=s.p+"img/legs1.png"},function(e,t,s){e.exports=s.p+"img/head5.png"},function(e,t,s){e.exports=s.p+"img/head4_1.png"},function(e,t,s){e.exports=s.p+"img/head4.png"},function(e,t,s){e.exports=s.p+"img/head3.png"},function(e,t,s){e.exports=s.p+"img/head2.png"},function(e,t,s){e.exports=s.p+"img/head1.png"},function(e,t,s){e.exports=s.p+"img/enemy-idle-sprite.png"},function(e,t,s){e.exports=s.p+"img/body5.png"},function(e,t,s){e.exports=s.p+"img/body4.png"},function(e,t,s){e.exports=s.p+"img/body3.png"},function(e,t,s){e.exports=s.p+"img/body2.png"},function(e,t,s){e.exports=s.p+"img/body1.png"},function(e,t,s){e.exports=s.p+"img/background.jpg"},function(e,t,s){var i={"./background.jpg":21,"./body1.png":20,"./body2.png":19,"./body3.png":18,"./body4.png":17,"./body5.png":16,"./enemy-idle-sprite.png":15,"./head1.png":14,"./head2.png":13,"./head3.png":12,"./head4.png":11,"./head4_1.png":10,"./head5.png":9,"./legs1.png":8,"./legs2.png":7,"./legs3.png":6,"./legs4.png":5,"./legs5.png":4,"./player-attack-sprite.png":3,"./player-idle-sprite.png":2,"./player-sprite.png":1};function n(e){var t=r(e);return s(t)}function r(e){var t=i[e];if(!(t+1)){var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}return t}n.keys=function(){return Object.keys(i)},n.resolve=r,e.exports=n,n.id=22},,,,,function(e,t){}]);